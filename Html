<div class="section">
  <h3>ğŸ“¸ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø£ÙƒÙ„ Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³Ø¹Ø±Ø§Øª</h3>
  <input type="file" id="foodImage" accept="image/*" />
  <button onclick="analyzeFoodImage()">Ø­Ù„Ù„ Ø§Ù„ØµÙˆØ±Ø©</button>
  <div id="aiResult"></div>
</div>

<script>
  async function analyzeFoodImage() {
    const input = document.getElementById('foodImage');
    if (input.files.length === 0) {
      alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø®ØªØ± ØµÙˆØ±Ø©");
      return;
    }

    const file = input.files[0];
    const formData = new FormData();
    formData.append('image', file);

    document.getElementById('aiResult').innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„... â³";

    try {
      // Ù…Ø«Ø§Ù„ API ÙˆÙ‡Ù…ÙŠ: Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
      const response = await fetch('https://your-food-ai-api.com/analyze', {
        method: 'POST',
        body: formData,
        // headers Ù„Ùˆ ÙÙŠ ØªÙˆÙƒÙ† Ø£Ù…Ø§Ù†
      });
      const data = await response.json();

      // Ù†ÙØªØ±Ø¶ Ø§Ù„Ø±Ø¯ Ù‡ÙŠÙƒÙˆÙ† ÙÙŠÙ‡:
      // data = { foodName: "Ø³Ù„Ø·Ø©", calories: 120, protein: 3, carbs: 15, fats: 4 }

      if (data.foodName) {
        document.getElementById('aiResult').innerHTML = `
          <h4>Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„:</h4>
          <p>Ø§Ø³Ù… Ø§Ù„Ø£ÙƒÙ„Ø©: ${data.foodName}</p>
          <p>Ø§Ù„Ø³Ø¹Ø±Ø§Øª: ${data.calories} ÙƒØ§Ù„ÙˆØ±ÙŠ</p>
          <p>Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†: ${data.protein} Ø¬Ù…</p>
          <p>Ø§Ù„ÙƒØ§Ø±Ø¨: ${data.carbs} Ø¬Ù…</p>
          <p>Ø§Ù„Ø¯Ù‡ÙˆÙ†: ${data.fats} Ø¬Ù…</p>
          <button onclick="addFoodFromAI(data)">Ø£Ø¶Ù Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¬Ø¨Ø©</button>
        `;
      } else {
        document.getElementById('aiResult').innerHTML = "Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£ÙƒÙ„Ø©ØŒ Ø­Ø§ÙˆÙ„ ØµÙˆØ±Ø© Ø£Ø®Ø±Ù‰.";
      }
    } catch (err) {
      document.getElementById('aiResult').innerHTML = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„.";
      console.error(err);
    }
  }

  // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ¬Ø¨Ø© Ø§Ù„Ù†Ø§ØªØ¬Ø© Ù…Ù† AI Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙƒÙ„
  function addFoodFromAI(data) {
    foodData.push({
      name: data.foodName,
      calories: data.calories,
      protein: data.protein,
      carbs: data.carbs,
      fats: data.fats
    });
    localStorage.setItem('foods', JSON.stringify(foodData));
    displayFoods();
    document.getElementById('aiResult').innerHTML = "ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¬Ø§Ø­!";
  }
</script>
