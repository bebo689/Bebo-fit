<script>
  let foodData = JSON.parse(localStorage.getItem('foods')) || [];

  function addFood() {
    const name = document.getElementById("foodName").value;
    const calories = parseFloat(document.getElementById("foodCalories").value);
    const protein = parseFloat(document.getElementById("foodProtein").value);
    const carbs = parseFloat(document.getElementById("foodCarbs").value);
    const fats = parseFloat(document.getElementById("foodFats").value);

    if (!name || isNaN(calories) || isNaN(protein) || isNaN(carbs) || isNaN(fats)) {
      alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙƒÙ„Ø©");
      return;
    }

    foodData.push({ name, calories, protein, carbs, fats });
    localStorage.setItem('foods', JSON.stringify(foodData));
    displayFoods();
  }

  function displayFoods() {
    let list = '<h4>ğŸ” Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©:</h4><ul>';
    let totalCalories = 0, totalProtein = 0, totalCarbs = 0, totalFats = 0;

    foodData.forEach((food, i) => {
      list += `<li>${food.name} - ${food.calories} ÙƒØ§Ù„ - ${food.protein} Ø¨Ø±ÙˆØªÙŠÙ† - ${food.carbs} ÙƒØ§Ø±Ø¨ - ${food.fats} Ø¯Ù‡ÙˆÙ† 
      <button onclick="deleteFood(${i})">âŒ Ø­Ø°Ù</button></li>`;
      totalCalories += food.calories;
      totalProtein += food.protein;
      totalCarbs += food.carbs;
      totalFats += food.fats;
    });

    list += '</ul>';
    document.getElementById("foodList").innerHTML = list;

    document.getElementById("totals").innerHTML = `
      <h4>ğŸ“Š Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙŠÙˆÙ…ÙŠ:</h4>
      <p>Ø§Ù„Ø³Ø¹Ø±Ø§Øª: ${totalCalories.toFixed(1)} ÙƒØ§Ù„ÙˆØ±ÙŠ</p>
      <p>Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†: ${totalProtein.toFixed(1)} Ø¬Ù…</p>
      <p>Ø§Ù„ÙƒØ§Ø±Ø¨: ${totalCarbs.toFixed(1)} Ø¬Ù…</p>
      <p>Ø§Ù„Ø¯Ù‡ÙˆÙ†: ${totalFats.toFixed(1)} Ø¬Ù…</p>
    `;
  }

  function deleteFood(index) {
    foodData.splice(index, 1);
    localStorage.setItem('foods', JSON.stringify(foodData));
    displayFoods();
  }

  window.onload = displayFoods;
</script>
